(function(t){function e(e){for(var s,r,c=e[0],l=e[1],o=e[2],u=0,p=[];u<c.length;u++)r=c[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);h&&h(e);while(p.length)p.shift()();return n.push.apply(n,o||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],s=!0,c=1;c<i.length;c++){var l=i[c];0!==a[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=i[0]))}return t}var s={},a={app:0},n=[];function r(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=s,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var o=0;o<c.length;o++)e(c[o]);var h=l;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var s=i("85ec"),a=i.n(s);a.a},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"settings",class:{hide:!t.showSettings}},[i("h2",{staticClass:"s"},[t._v(" Settings ")]),i("div",{staticClass:"s horizontal"},[i("svg",{staticClass:"i margin-30",class:{selected:"time"===t.settings.type},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},on:{click:function(){return t.settings.type="time"}}},[i("path",{attrs:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"}})]),i("svg",{staticClass:"i margin-30",class:{selected:"time"!==t.settings.type},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},on:{click:function(){return t.settings.type="heart-beat"}}},[i("path",{attrs:{d:"M320.2 243.8l-49.7 99.4c-6 12.1-23.4 11.7-28.9-.6l-56.9-126.3-30 71.7H60.6l182.5 186.5c7.1 7.3 18.6 7.3 25.7 0L451.4 288H342.3l-22.1-44.2zM473.7 73.9l-2.4-2.5c-51.5-52.6-135.8-52.6-187.4 0L256 100l-27.9-28.5c-51.5-52.7-135.9-52.7-187.4 0l-2.4 2.4C-10.4 123.7-12.5 203 31 256h102.4l35.9-86.2c5.4-12.9 23.6-13.2 29.4-.4l58.2 129.3 49-97.9c5.9-11.8 22.7-11.8 28.6 0l27.6 55.2H481c43.5-53 41.4-132.3-7.3-182.1z"}})])]),i("div",{staticClass:"s"},[i("label",{attrs:{for:"Ticks"}},[t._v("Total "+t._s(t.settings.type))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.ticks,expression:"settings.ticks"}],attrs:{id:"Ticks",type:"number",step:"10",min:"0"},domProps:{value:t.settings.ticks},on:{input:function(e){e.target.composing||t.$set(t.settings,"ticks",e.target.value)}}}),i("label",{attrs:{for:"AddTicks"}},[t._v("Add "+t._s(t.settings.type))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.addTicks,expression:"settings.addTicks"}],attrs:{id:"AddTicks",type:"number",min:"0"},domProps:{value:t.settings.addTicks},on:{input:function(e){e.target.composing||t.$set(t.settings,"addTicks",e.target.value)}}})]),i("div",{staticClass:"s horizontal"},[i("svg",{staticClass:"i small",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},on:{click:t.reset}},[i("path",{attrs:{d:"M255.545 8c-66.269.119-126.438 26.233-170.86 68.685L48.971 40.971C33.851 25.851 8 36.559 8 57.941V192c0 13.255 10.745 24 24 24h134.059c21.382 0 32.09-25.851 16.971-40.971l-41.75-41.75c30.864-28.899 70.801-44.907 113.23-45.273 92.398-.798 170.283 73.977 169.484 169.442C423.236 348.009 349.816 424 256 424c-41.127 0-79.997-14.678-110.63-41.556-4.743-4.161-11.906-3.908-16.368.553L89.34 422.659c-4.872 4.872-4.631 12.815.482 17.433C133.798 479.813 192.074 504 256 504c136.966 0 247.999-111.033 248-247.998C504.001 119.193 392.354 7.755 255.545 8z"}})]),i("svg",{staticClass:"i small",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},on:{click:t.closeSettings}},[i("path",{attrs:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}})])])]),i("PlayerTimer",{staticClass:"rotate",attrs:{name:t.player2.name,"ticks-left":t.player2.ticks,"is-active":t.player2.isActive,"is-player1":t.player2.isPlayer1,"is-finish":t.isFinish,tick:t.player2.tick,"ble-ready":t.player2.bleReady},on:{"i-am-done":t.nextPlayer,connect:t.connect}}),i("div",{staticClass:"between-players"},[i("svg",{staticClass:"i",class:{hide:!t.isPause},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},on:{click:t.openSettings}},["time"===t.settings.type?i("path",{attrs:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"}}):i("path",{attrs:{d:"M320.2 243.8l-49.7 99.4c-6 12.1-23.4 11.7-28.9-.6l-56.9-126.3-30 71.7H60.6l182.5 186.5c7.1 7.3 18.6 7.3 25.7 0L451.4 288H342.3l-22.1-44.2zM473.7 73.9l-2.4-2.5c-51.5-52.6-135.8-52.6-187.4 0L256 100l-27.9-28.5c-51.5-52.7-135.9-52.7-187.4 0l-2.4 2.4C-10.4 123.7-12.5 203 31 256h102.4l35.9-86.2c5.4-12.9 23.6-13.2 29.4-.4l58.2 129.3 49-97.9c5.9-11.8 22.7-11.8 28.6 0l27.6 55.2H481c43.5-53 41.4-132.3-7.3-182.1z"}})]),i("svg",{staticClass:"i",class:{hide:!t.isFinish},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},on:{click:t.reset}},[i("path",{attrs:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}})]),i("svg",{staticClass:"i",class:{hide:t.isPause||t.isFinish},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},on:{click:t.pause}},[i("path",{attrs:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"}})])]),i("PlayerTimer",{attrs:{name:t.player1.name,"ticks-left":t.player1.ticks,"is-active":t.player1.isActive,"is-player1":t.player1.isPlayer1,"is-finish":t.isFinish,tick:t.player1.tick,"ble-ready":t.player1.bleReady},on:{"i-am-done":t.nextPlayer,connect:t.connect}})],1)},n=[],r=(i("a9e3"),i("96cf"),i("1da1")),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"area",on:{touchstart:t.iAmDone}},[t.isActive?t._e():i("div",{staticClass:"hide-div"}),t.bleReady?t._e():i("div",{staticClass:"connect-div",on:{click:t.connect}},[i("h1",[t._v("Click to Connect")])]),i("div",{staticClass:"player"},[i("div",{staticClass:"ticks"},[t._v(" "+t._s(t.ticksLeft)+" ")]),i("div",{staticClass:"name"},[t._v(" "+t._s(t.name)+" ")]),i("div",{staticClass:"tick"},[i("svg",{staticStyle:{height:"100%"},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[i("path",{attrs:{d:"M320.2 243.8l-49.7 99.4c-6 12.1-23.4 11.7-28.9-.6l-56.9-126.3-30 71.7H60.6l182.5 186.5c7.1 7.3 18.6 7.3 25.7 0L451.4 288H342.3l-22.1-44.2zM473.7 73.9l-2.4-2.5c-51.5-52.6-135.8-52.6-187.4 0L256 100l-27.9-28.5c-51.5-52.7-135.9-52.7-187.4 0l-2.4 2.4C-10.4 123.7-12.5 203 31 256h102.4l35.9-86.2c5.4-12.9 23.6-13.2 29.4-.4l58.2 129.3 49-97.9c5.9-11.8 22.7-11.8 28.6 0l27.6 55.2H481c43.5-53 41.4-132.3-7.3-182.1z"}})]),t._v(" "+t._s(t.tick)+" ")])])])},l=[],o={props:{isPlayer1:{type:Boolean,required:!0},name:{type:String,required:!0},ticksLeft:{type:Number,required:!0},isActive:{type:Boolean,required:!0},isFinish:{type:Boolean,required:!0},tick:{type:Number,required:!0},bleReady:{type:Boolean,required:!0}},methods:{iAmDone:function(){this.isFinish||this.$emit("i-am-done",this.isPlayer1)},connect:function(){this.$emit("connect",this.isPlayer1)}}},h=o,u=(i("5870"),i("2877")),p=Object(u["a"])(h,c,l,!1,null,"b67d083a",null),d=p.exports,y={name:"App",components:{PlayerTimer:d},data:function(){return{player1:{isPlayer1:!0,name:"Player 1",ticks:350,isActive:!1,tick:60,bleReady:!0},player2:{isPlayer1:!1,name:"Player 2",ticks:350,isActive:!1,tick:60,bleReady:!0},playing:!1,showSettings:!1,settings:{type:"heart-beat",ticks:350,addTicks:15},defaultSettings:{type:"heart-beat",ticks:350,addTicks:15}}},computed:{settingsType:function(){return this.settings.type},isPause:function(){return!this.isFinish&&!this.player1.isActive&&!this.player2.isActive},isFinish:function(){return this.player1.ticks<1||this.player2.ticks<1},bleReady:function(){return"heart-beat"!==this.settings.type||this.player1_bleReady&&this.player2_bleReady},player1_bleReady:function(){return this.player1.bleReady},player2_bleReady:function(){return this.player2.bleReady}},watch:{isFinish:function(t){t&&console.log("finish: ",this.isFinish)},settingsType:{immediate:!0,handler:function(t){"heart-beat"===t&&(this.player1.bleReady=!1,this.player2.bleReady=!1),"time"===t&&(this.player1.bleReady=!0,this.player2.bleReady=!0,this.player1.tick=60,this.player2.tick=60)}}},mounted:function(){var t=this;setInterval((function(){t.tick()}),1e3)},methods:{getPlayer:function(t){return t?this.player1:this.player2},nextPlayer:function(t){if(this.bleReady){var e=this.getPlayer(t);e.isActive&&(e.ticks+=Number(this.settings.addTicks)),e.isActive=!1,this.getPlayer(!t).isActive=!0}},pause:function(){this.player1.isActive=!1,this.player2.isActive=!1},tick:function(){this.isFinish||(this.player1.isActive?this.player1.ticks-=Math.floor(this.player1.tick/60):this.player2.isActive&&(this.player2.ticks-=Math.floor(this.player2.tick/60)))},reset:function(){this.player1.isActive=!1,this.player2.isActive=!1,this.settings.type=this.defaultSettings.type,this.settings.ticks=this.defaultSettings.ticks,this.settings.addTicks=this.defaultSettings.addTicks},openSettings:function(){this.showSettings=!0},closeSettings:function(){this.showSettings=!1,this.player1.ticks=Number(this.settings.ticks),this.player2.ticks=Number(this.settings.ticks)},getHandler:function(){return this.handleCharacteristicValueChanged()},handleCharacteristicValueChangedPlayer1:function(t){var e=t.target.value.getInt16();this.player1.tick=e},handleCharacteristicValueChangedPlayer2:function(t){var e=t.target.value.getInt16();this.player2.tick=e},connect:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var i,s,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,navigator.bluetooth.requestDevice({filters:[{services:["heart_rate"]}]});case 2:return i=t.sent,t.next=5,i.gatt.connect();case 5:return i=t.sent,t.next=8,i.getPrimaryService("heart_rate");case 8:return s=t.sent,t.next=11,s.getCharacteristic("heart_rate_measurement");case 11:return a=t.sent,t.next=14,a.startNotifications();case 14:a=t.sent,n=e?this.handleCharacteristicValueChangedPlayer1:this.handleCharacteristicValueChangedPlayer2,a.addEventListener("characteristicvaluechanged",n),this.getPlayer(e).bleReady=!0;case 18:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},v=y,g=(i("034f"),Object(u["a"])(v,a,n,!1,null,null,null)),f=g.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(f)}}).$mount("#app")},5870:function(t,e,i){"use strict";var s=i("8047"),a=i.n(s);a.a},8047:function(t,e,i){},"85ec":function(t,e,i){}});